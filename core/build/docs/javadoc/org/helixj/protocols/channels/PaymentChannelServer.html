<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="fr">
<head>
<!-- Generated by javadoc -->
<title>PaymentChannelServer (core 0.15.8 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: org.helixj.protocols.channels, class: PaymentChannelServer">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<a id="skip.navbar.top">
<!--   -->
</a>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.helixj.protocols.channels</a></div>
<h1 title="Class PaymentChannelServer" class="title">Class PaymentChannelServer</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree">java.lang.Object
<div class="inheritance">org.helixj.protocols.channels.PaymentChannelServer</div>
</div>
<section class="description">
<hr>
<pre>public class <span class="typeNameLabel">PaymentChannelServer</span>
extends java.lang.Object</pre>
<div class="block"><p>A handler class which handles most of the complexity of creating a payment channel connection by providing a
 simple in/out interface which is provided with protobufs from the client and which generates protobufs which should
 be sent to the client.</p>

 <p>Does all required verification of messages and properly stores state objects in the wallet-attached
 <a href="StoredPaymentChannelServerStates.html" title="class in org.helixj.protocols.channels"><code>StoredPaymentChannelServerStates</code></a> so that they are automatically closed when necessary and payment
 transactions are not lost if the application crashes before it unlocks.</p></div>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="PaymentChannelServer.ServerConnection.html" title="interface in org.helixj.protocols.channels">PaymentChannelServer.ServerConnection</a></span></code></th>
<td class="colLast">
<div class="block">Implements the connection between this server and the client, providing an interface which allows messages to be
 sent to the client, requests for the connection to the client to be closed, and callbacks which occur when the
 channel is fully open or the client completes a payment.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_MAX_TIME_WINDOW">DEFAULT_MAX_TIME_WINDOW</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#DEFAULT_MIN_TIME_WINDOW">DEFAULT_MIN_TIME_WINDOW</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#HARD_MIN_TIME_WINDOW">HARD_MIN_TIME_WINDOW</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.concurrent.locks.ReentrantLock</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#lock">lock</a></span></code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#maxTimeWindow">maxTimeWindow</a></span></code></th>
<td class="colLast">
<div class="block">Maximum channel duration, in seconds, that the client can request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#minTimeWindow">minTimeWindow</a></span></code></th>
<td class="colLast">
<div class="block">Minimum channel duration, in seconds, that the client can request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.Integer,&#8203;java.lang.Integer&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#SERVER_VERSIONS">SERVER_VERSIONS</a></span></code></th>
<td class="colLast">
<div class="block">A map of supported versions; keys are major versions, and the corresponding
 value is the minor version at that major level.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.helixj.core.TransactionBroadcaster,org.helixj.wallet.Wallet,org.helixj.core.Coin,long,long,org.helixj.protocols.channels.PaymentChannelServer.ServerConnection)">PaymentChannelServer</a></span>&#8203;(<a href="../../core/TransactionBroadcaster.html" title="interface in org.helixj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
<a href="../../wallet/Wallet.html" title="class in org.helixj.wallet">Wallet</a>&nbsp;wallet,
<a href="../../core/Coin.html" title="class in org.helixj.core">Coin</a>&nbsp;minAcceptedChannelSize,
long&nbsp;minTimeWindow,
long&nbsp;maxTimeWindow,
<a href="PaymentChannelServer.ServerConnection.html" title="interface in org.helixj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</code></th>
<td class="colLast">
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(org.helixj.core.TransactionBroadcaster,org.helixj.wallet.Wallet,org.helixj.core.Coin,org.helixj.protocols.channels.PaymentChannelServer.ServerConnection)">PaymentChannelServer</a></span>&#8203;(<a href="../../core/TransactionBroadcaster.html" title="interface in org.helixj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
<a href="../../wallet/Wallet.html" title="class in org.helixj.wallet">Wallet</a>&nbsp;wallet,
<a href="../../core/Coin.html" title="class in org.helixj.core">Coin</a>&nbsp;minAcceptedChannelSize,
<a href="PaymentChannelServer.ServerConnection.html" title="interface in org.helixj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</code></th>
<td class="colLast">
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Closes the connection by generating a settle message for the client and calls
 <a href="PaymentChannelServer.ServerConnection.html#destroyConnection(org.helixj.protocols.channels.PaymentChannelCloseException.CloseReason)"><code>PaymentChannelServer.ServerConnection.destroyConnection(CloseReason)</code></a>.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectionClosed()">connectionClosed</a></span>()</code></th>
<td class="colLast">
<div class="block">Called when the connection terminates.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#connectionOpen()">connectionOpen</a></span>()</code></th>
<td class="colLast">
<div class="block">Called to indicate the connection has been opened and messages can now be generated for the client.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#receiveMessage(org.bitcoin.paymentchannel.Protos.TwoWayChannelMessage)">receiveMessage</a></span>&#8203;(<a href="../../../bitcoin/paymentchannel/Protos.TwoWayChannelMessage.html" title="class in org.bitcoin.paymentchannel">Protos.TwoWayChannelMessage</a>&nbsp;msg)</code></th>
<td class="colLast">
<div class="block">Called when a message is received from the client.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code><a href="PaymentChannelServerState.html" title="class in org.helixj.protocols.channels">PaymentChannelServerState</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#state()">state</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the underlying <a href="PaymentChannelServerState.html" title="class in org.helixj.protocols.channels"><code>PaymentChannelServerState</code></a> object that is being manipulated.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="lock">lock</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">java.util.concurrent.locks.ReentrantLock</span>&nbsp;<span class="memberName">lock</span></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="SERVER_VERSIONS">SERVER_VERSIONS</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">java.util.Map&lt;java.lang.Integer,&#8203;java.lang.Integer&gt;</span>&nbsp;<span class="memberName">SERVER_VERSIONS</span></div>
<div class="block">A map of supported versions; keys are major versions, and the corresponding
 value is the minor version at that major level.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="DEFAULT_MAX_TIME_WINDOW">DEFAULT_MAX_TIME_WINDOW</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">DEFAULT_MAX_TIME_WINDOW</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.helixj.protocols.channels.PaymentChannelServer.DEFAULT_MAX_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="maxTimeWindow">maxTimeWindow</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">maxTimeWindow</span></div>
<div class="block">Maximum channel duration, in seconds, that the client can request. Defaults to 1 week.
 Note that the server needs to be online for the whole time the channel is open.
 Failure to do this could cause loss of all payments received on the channel.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="DEFAULT_MIN_TIME_WINDOW">DEFAULT_MIN_TIME_WINDOW</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">DEFAULT_MIN_TIME_WINDOW</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.helixj.protocols.channels.PaymentChannelServer.DEFAULT_MIN_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="HARD_MIN_TIME_WINDOW">HARD_MIN_TIME_WINDOW</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">HARD_MIN_TIME_WINDOW</span></div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#org.helixj.protocols.channels.PaymentChannelServer.HARD_MIN_TIME_WINDOW">Constant Field Values</a></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="minTimeWindow">minTimeWindow</a></h3>
<div class="memberSignature"><span class="modifiers">protected final</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">minTimeWindow</span></div>
<div class="block">Minimum channel duration, in seconds, that the client can request. Should always be larger than  than 2 hours, defaults to 4 hours</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.helixj.core.TransactionBroadcaster,org.helixj.wallet.Wallet,org.helixj.core.Coin,org.helixj.protocols.channels.PaymentChannelServer.ServerConnection)">PaymentChannelServer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">PaymentChannelServer</span>&#8203;(<span class="arguments"><a href="../../core/TransactionBroadcaster.html" title="interface in org.helixj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
<a href="../../wallet/Wallet.html" title="class in org.helixj.wallet">Wallet</a>&nbsp;wallet,
<a href="../../core/Coin.html" title="class in org.helixj.core">Coin</a>&nbsp;minAcceptedChannelSize,
<a href="PaymentChannelServer.ServerConnection.html" title="interface in org.helixj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</span></div>
<div class="block">Creates a new server-side state manager which handles a single client connection. The server will only accept
 a channel with time window between 4 hours and 1 week. Note that the server need to be online for the whole time the channel is open.
 Failure to do this could cause loss of all payments received on the channel.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>broadcaster</code> - The PeerGroup on which transactions will be broadcast - should have multiple connections.</dd>
<dd><code>wallet</code> - The wallet which will be used to complete transactions.
               Unlike <a href="PaymentChannelClient.html" title="class in org.helixj.protocols.channels"><code>PaymentChannelClient</code></a>, this does not have to already contain a StoredState manager</dd>
<dd><code>minAcceptedChannelSize</code> - The minimum value the client must lock into this channel. A value too large will be
                               rejected by clients, and a value too low will require excessive channel reopening
                               and may cause fees to be require to settle the channel. A reasonable value depends
                               entirely on the expected maximum for the channel, and should likely be somewhere
                               between a few bitcents and a bitcoin.</dd>
<dd><code>conn</code> - A callback listener which represents the connection to the client (forwards messages we generate to
             the client and will close the connection on request)</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(org.helixj.core.TransactionBroadcaster,org.helixj.wallet.Wallet,org.helixj.core.Coin,long,long,org.helixj.protocols.channels.PaymentChannelServer.ServerConnection)">PaymentChannelServer</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">PaymentChannelServer</span>&#8203;(<span class="arguments"><a href="../../core/TransactionBroadcaster.html" title="interface in org.helixj.core">TransactionBroadcaster</a>&nbsp;broadcaster,
<a href="../../wallet/Wallet.html" title="class in org.helixj.wallet">Wallet</a>&nbsp;wallet,
<a href="../../core/Coin.html" title="class in org.helixj.core">Coin</a>&nbsp;minAcceptedChannelSize,
long&nbsp;minTimeWindow,
long&nbsp;maxTimeWindow,
<a href="PaymentChannelServer.ServerConnection.html" title="interface in org.helixj.protocols.channels">PaymentChannelServer.ServerConnection</a>&nbsp;conn)</span></div>
<div class="block">Creates a new server-side state manager which handles a single client connection.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>broadcaster</code> - The PeerGroup on which transactions will be broadcast - should have multiple connections.</dd>
<dd><code>wallet</code> - The wallet which will be used to complete transactions.
               Unlike <a href="PaymentChannelClient.html" title="class in org.helixj.protocols.channels"><code>PaymentChannelClient</code></a>, this does not have to already contain a StoredState manager</dd>
<dd><code>minAcceptedChannelSize</code> - The minimum value the client must lock into this channel. A value too large will be
                               rejected by clients, and a value too low will require excessive channel reopening
                               and may cause fees to be require to settle the channel. A reasonable value depends
                               entirely on the expected maximum for the channel, and should likely be somewhere
                               between a few bitcents and a bitcoin.</dd>
<dd><code>minTimeWindow</code> - The minimum allowed channel time window in seconds, must be larger than 7200.</dd>
<dd><code>maxTimeWindow</code> - The maximum allowed channel time window in seconds. Note that the server need to be online for the whole time the channel is open.
                              Failure to do this could cause loss of all payments received on the channel.</dd>
<dd><code>conn</code> - A callback listener which represents the connection to the client (forwards messages we generate to
              the client and will close the connection on request)</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="state()">state</a></h3>
<div class="memberSignature"><span class="annotations">@Nullable
</span><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="PaymentChannelServerState.html" title="class in org.helixj.protocols.channels">PaymentChannelServerState</a></span>&nbsp;<span class="memberName">state</span>()</div>
<div class="block">Returns the underlying <a href="PaymentChannelServerState.html" title="class in org.helixj.protocols.channels"><code>PaymentChannelServerState</code></a> object that is being manipulated. This object allows
 you to learn how much money has been transferred, etc. May be null if the channel wasn't negotiated yet.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="receiveMessage(org.bitcoin.paymentchannel.Protos.TwoWayChannelMessage)">receiveMessage</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">receiveMessage</span>&#8203;(<span class="arguments"><a href="../../../bitcoin/paymentchannel/Protos.TwoWayChannelMessage.html" title="class in org.bitcoin.paymentchannel">Protos.TwoWayChannelMessage</a>&nbsp;msg)</span></div>
<div class="block">Called when a message is received from the client. Processes the given message and generates events based on its
 content.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="connectionClosed()">connectionClosed</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">connectionClosed</span>()</div>
<div class="block"><p>Called when the connection terminates. Notifies the <a href="StoredServerChannel.html" title="class in org.helixj.protocols.channels"><code>StoredServerChannel</code></a> object that we can attempt to
 resume this channel in the future and stops generating messages for the client.</p>

 <p>Note that this <b>MUST</b> still be called even after either
 <a href="PaymentChannelServer.ServerConnection.html#destroyConnection(org.helixj.protocols.channels.PaymentChannelCloseException.CloseReason)"><code>PaymentChannelServer.ServerConnection.destroyConnection(CloseReason)</code></a> or
 <a href="#close()"><code>close()</code></a> is called to actually handle the connection close logic.</p></div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="connectionOpen()">connectionOpen</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">connectionOpen</span>()</div>
<div class="block">Called to indicate the connection has been opened and messages can now be generated for the client.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="close()">close</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">close</span>()</div>
<div class="block"><p>Closes the connection by generating a settle message for the client and calls
 <a href="PaymentChannelServer.ServerConnection.html#destroyConnection(org.helixj.protocols.channels.PaymentChannelCloseException.CloseReason)"><code>PaymentChannelServer.ServerConnection.destroyConnection(CloseReason)</code></a>. Note that this does not broadcast
 the payment transaction and the client may still resume the same channel if they reconnect</p>
 <p>
 <p>Note that <a href="#connectionClosed()"><code>connectionClosed()</code></a> must still be called after the connection fully
 closes.</p></div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
